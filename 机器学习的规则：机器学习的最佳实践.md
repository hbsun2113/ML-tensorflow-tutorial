#机器学习的规则：机器学习工程的最佳实践
这篇文档的目的在于帮助那些掌握了机器学习基础知识的人群能够在Google的机器学习最佳实践中享受到益处。它与Google的C++风格指南或其他受欢迎的指南相似，代表了机器学习的一种风格。如果你上过机器学习的课程，或者曾经构建或者在某一机器学习模型上工作过，那么你有足够的背景阅读这篇文章。

##术语
下面的名字将会在我们关于有效机器学习的的讨论中频繁出现：

1. 实例(Instance):你将要对其进行预测的事物。例如，一个示例可能是一个网页，你想将其分类为“是关于猫的”或“不是关于猫的”。
2. 标签(Label)：针对预测任务的答案。要么是机器学习系统所产生的答案，要么是训练数据给出的真实答案。例如，一个网页的标签可能是“是关于猫的”。
3. 特征(Feature):用于预测任务中的实例的属性。例如，一个网页可能包含的特征是“包含‘猫’这个词”。
4. 特征列(Feature Column)：一系列相关特征的集合，例如是用户可能居住的国家的集合。一个例子在特征列中可能包含一个或多个特征。“特征列”是Google指定的专用术语。一个特征列就如同虚拟系统中的命名空间，或是域。
5. 例子(Example):一个实例，包含了特征和标签。
6. 模型(Model)：关于预测任务的统计表示。你在许多例子上对模型进行训练，然后利用模型进行预测。
7. 度量标准(Metric)：一项你很关心的指标。可能被直接或间接优化。
8. 目标(Object)：一个特殊的度量标准，是你的算法尝试优化的度量标准。
9. 管道(Pipeline)：围绕机器学习算法的一系列配套措施。包含从头到尾地收集数据，将其放进训练数据的文件中，训练一个或多个模型，并将模型用于生产。
10. 点击率(Click-through Rate):网站访问者点击进入广告的比率。

##概述
做出伟大的产品：

**做机器学习，如同你是一个伟大的工程师，而不是你是一个伟大的机器学习专家。**

大多数你面对的问题都会是工程问题。即使拥有一个伟大的机器学习专家所具备的资源，绝大多数的收益都会是好的特征，而不是好的机器学习算法。所以，基本的方法是：

  1. 确保你的管道是端到端牢固的。
  2. 建立一个合乎情理的目标。
  3. 使用简单的方法，添加具有普遍共识的、常识性的特征们。
  4. 确保你的管道仍旧是牢固的。

这方法将会在很长的时间都很有效。只有你不再拥有可以使你走得更远的简单技巧的时候，你才需要从这种方法中脱离出来。增加复杂性会减缓未来的推进速度。

一旦你厌烦了简单的技巧，最为尖端的机器学习技术可能才是你的未来。请看章节三机器学习项目。

文档将会按照如下进行安排：

  1. 第一部分将会帮助你理解是否是正确的时间用于构建机器学习系统。
  2. 第二部分是关于构建你的第一个管道。
  3. 第三部分是在向管道中添加新特征时的启动和迭代，如何评估模型和训练偏差。
  4. 第四部分是讲，当你到达瓶颈时该如何去做。
  5. 然后，会列举出一些相关工作和附录，它们是关于本系统中常用系统举例的背景知识。

##在机器学习系统之前
规则 #1：不必在启动一个产品的时候担心没有机器学习。

机器学习很酷，但是它需要数据。理论上，你可以从不同的问题上获得数据，然后调整模型用于一个新的产品上，但它可能比基本的启发式方法还要差。如果你认为机器学习会给你100%的提升，那么启发式方法会给你50%的提升。

例如，如果你的app商店里对app进行排名，你可以使用安装率或者安装的数量作为启发式方法。如果你在检测垃圾邮件，你可以过滤掉曾经发送过垃圾邮件的发送者。不要担心使用人工编辑。如果你需要对联系人进行排名，请按照使用频率进行排序(或者甚至使用字母序进行排列)。如果机器学习方法不能完全符合你的产品需要，请不要使用它直到你拥有了数据。

规则 #2:首先，设计和实现度量标准

在正式确定你的机器学习系统要做什么之前，请尽可能多地跟踪你的当前系统。之所以这样做是因为一下几个原因：

   1. 早期获得系统用户的许可更加容易。
   2. 如果你认为一些事情将来可能造成问题，那么最好的方法是现在就获得历史数据。
   3. 如果你在设计系统时考虑到了度量标准的，很多事情在将来可能会变得容易。特殊地，你不会想在日志里查找字符串用来获得度量标准的数据。
   4. 你将注意到什么事情改变了，什么事情没有发生改动。例如，假设你想要优化系统的日均活动用户。然而，在你对系统的早期操控中，你会发现用户体验的显著变化并没有改变这一项指标。

Google Plus团队会测量每次阅读的扩展，每次阅读的分享，每次阅读的评论，每个用户的评论，每个用户的分享，等等，这些用于计算发帖时间的好处。另外，注意到实验框架是很重要的，你可以通过实验将用户进行分组，然后集成起来用于统计。详见 规则 #12。

通过更加活跃地添加指标，你可以对你的系统更加熟悉。注意到一个问题？添加一个指标用来跟踪它！对上一版本的量化变化感兴趣？添加一个指标跟踪它！

规则 #3：在复杂的启发式基础上选择机器学习

一个简单的启发式方法可能会让你的产品走出门外。一套复杂的启发式方法是不容易维护的。一旦你有了数据和基本的想法去赴之实现。请转移到机器学习的方法中去。正如绝大多数的软件工程任务一样，你将想要持续地更新你的方法，到底选择启发式方法还是机器学习方法呢？你将会发现机器学习方法更容易维护和更新(请见规则 #16)。